---
import { SearchParam } from "site/types/query";
import { RouteType } from "site/types/routes";

interface Props {
  tags: SearchParam<"index">;
  path: RouteType;
  size?: "sm" | "base";
}

const { tags, size = "base", path } = Astro.props;
const arrTags = Object.entries(tags).filter(([key, val]) => !!key && !!val);
---

<div
  id="tags-container"
  class={`flex flex-wrap items-center mt-1 mb-2 gap-x-4 ${size === "sm" ? "text-xs" : "text-sm"}`}
>
  {
    arrTags.map(([key, val]) =>
      !!val
        ? () => {
            return (
              <a
                id={`${key}=${val}`}
                class={`tag-button ${key} ${val} cursor-pointer rounded-sm ${size === "sm" ? "px-1 py-0" : "px-2 py-1"} `}
                aria-description={`link to tag: ${key}`}
                href={`/${path}?${key}=${val}`}
              >
                {val}
              </a>
            );
          }
        : null,
    )
  }
</div>
